# ===================================================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# ===================================================================
# This file contains production-optimized settings for high-traffic
# deployments (10K-100K users/day). Copy to .env and customize.
# ===================================================================

# ===================================================================
# APPLICATION
# ===================================================================

NODE_ENV=production
PORT=3000
HOST=0.0.0.0

# ===================================================================
# DATABASE (MySQL 8.0+)
# ===================================================================

# Production database connection
# CRITICAL: Use secure credentials, SSL/TLS, and private network
DATABASE_URL="mysql://prod_user:SECURE_PASSWORD@db.internal:3306/prod_db?ssl=true"

# Connection pool for high traffic (10K-100K users/day)
# Recommended: 20-50 connections for production
# Monitor and adjust based on load testing results
DATABASE_POOL_MIN=10
DATABASE_POOL_MAX=50

# ===================================================================
# REDIS
# ===================================================================

# Production Redis instance
# CRITICAL: Use authentication and private network
REDIS_URL="redis://:REDIS_PASSWORD@redis.internal:6379"

# Production retry settings
REDIS_MAX_RETRIES=5
REDIS_CONNECT_TIMEOUT=5000

# ===================================================================
# JWT AUTHENTICATION
# ===================================================================

# CRITICAL: Generate a cryptographically secure secret
# Example: openssl rand -base64 48
JWT_SECRET="YOUR_PRODUCTION_JWT_SECRET_MUST_BE_AT_LEAST_32_CHARS_LONG"

# Production token expiry (tighter security)
JWT_ACCESS_EXPIRY="15m"
JWT_REFRESH_EXPIRY="7d"

# ===================================================================
# CORS
# ===================================================================

# REQUIRED in production - your frontend domain(s)
# Multiple origins separated by commas
CORS_ORIGIN="https://yourdomain.com,https://app.yourdomain.com"

# ===================================================================
# LOGGING
# ===================================================================

# Production: info or warn (reduces log volume)
# Use warn to reduce costs in high-traffic scenarios
LOG_LEVEL=info

# ===================================================================
# ERROR TRACKING
# ===================================================================

# Sentry for production error monitoring
# Get your DSN from: https://sentry.io/settings/projects/
SENTRY_DSN="https://YOUR_PUBLIC_KEY@o0.ingest.sentry.io/YOUR_PROJECT_ID"

# ===================================================================
# PRODUCTION CHECKLIST
# ===================================================================
# [ ] DATABASE_URL uses secure credentials and SSL
# [ ] JWT_SECRET is a strong random string (48+ chars)
# [ ] CORS_ORIGIN is set to your exact frontend URL(s)
# [ ] REDIS_URL uses authentication if Redis is exposed
# [ ] LOG_LEVEL is set to info or warn
# [ ] SENTRY_DSN is configured for error tracking
# [ ] Database connection pool tested under load
# [ ] All secrets are stored in environment variables, not in code
# [ ] SSL/TLS certificates are configured
# [ ] Firewall rules restrict access to database and Redis
